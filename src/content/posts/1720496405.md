---
title: '防抖与节流'
notice: ''
image: 'https://frame-illust.com/fi/wp-content/uploads/2017/05/stapler-9878-480x480.png'
date:
    publish: 2024-07-07
categories: ["Web"]
tags: ["javascript"]
draft: false
pin: true
---

在前端开发中，事件处理和函数调用的频率控制是提升用户体验和优化性能的重要手段。其中，“防抖”和“节流”是两种常见的技术，用于控制函数执行的频率，以避免过度消耗资源或导致不必要的计算。本文将深入探讨这两种技术的原理、实现方法以及应用场景。

## 1. 理解防抖

### 1.1 定义
防抖(Debounce)是一种函数调用策略，其核心思想是在一系列连续触发的事件中，只有当最后一次事件触发后的一段时间内没有新的事件发生时，才会执行相应的函数。这通常用于避免短时间内大量重复调用同一函数的情况。

### 1.2 实现方式
防抖可以通过设置一个定时器来实现。每次事件触发时，如果定时器已经存在，则清除它；然后重新设置一个新的定时器，在设定的延迟时间结束后执行函数。这样可以确保函数只在最后一次事件触发后的延迟时间结束后执行一次。

```javascript
function debounce(func, wait) {
    let timeout;
    return function() {
        const context = this;
        const args = arguments;
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(context, args), wait);
    };
}
```

### 1.3 应用场景
- 用户输入搜索框中的文本时，频繁触发的`oninput`事件。
- 拖拽元素时，连续的`ondrag`事件。
- 窗口大小改变时，连续的`onresize`事件。

## 2. 探索节流

### 2.1 定义
节流(Throttle)是对函数执行频率的一种限制，它保证函数在一定时间内最多执行一次。与防抖不同，即使在指定的时间间隔内有多个事件触发，节流也会确保函数至少执行一次。

### 2.2 实现方式
节流可以通过设置一个标志位或使用定时器来实现。当事件触发时，检查标志位或定时器的状态，如果允许执行，则执行函数并更新状态；否则，忽略这次事件直到下一次允许执行的时间点。

```javascript
function throttle(func, limit) {
    let inThrottle;
    return function() {
        const args = arguments;
        const context = this;
        if (!inThrottle) {
            func.apply(context, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    };
}
```

### 2.3 应用场景
- 滚动页面时，频繁触发的`onscroll`事件。
- 鼠标移动时，连续的`onmousemove`事件。
- 监听网络请求的频率，避免过快的请求导致服务器压力过大。

## 3. 总结
防抖和节流都是前端开发者必须掌握的技术，它们能有效减少不必要的计算和资源消耗，提高应用程序的性能和响应速度。在实际项目中，根据不同的需求选择合适的方法，可以显著提升用户体验。

通过本文的介绍，相信你对防抖和节流有了更深入的理解。在未来的开发中，不妨尝试运用这些技巧，让你的应用更加高效、流畅。